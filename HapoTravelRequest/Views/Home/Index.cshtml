@using HapoTravelRequest.Helpers
@model HapoTravelRequest.Models.HomePageVM

@{
    ViewData["Title"] = "Home Page";
}

<div class="request-container">
    <h2 class="request_header">This is a test table with loged in users travel requests</h2>
    <div class="request-table">
        <table>
            <thead>
                <tr>
                    <th>Employee</th>
                    <th>Location</th>
                    <th>Date</th>
                    <th>Transportation</th>
                    <th>Cost</th>
                    <th>Quick Action</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                @* display travel requests if they exist *@
                @if (Model.UserTravelRequests != null && Model.UserTravelRequests.Any())
                {
                    @foreach (var item in Model.UserTravelRequests)
                    {
                        <tr>
                            <td>
                                @item.FirstName @item.LastName
                            </td>
                            <td>
                                @item.Location
                            </td>
                            <td>
                                @item.ConferenceStartDate?.ToShortDateString() - @item.ConferenceEndDate?.ToShortDateString()
                            </td>
                            <td>
                                @item.TransportationMode
                            </td>
                            <td>
                                $@item.CostOfConference
                            </td>
                            <td><button class="btn cancel">Cancel</button></td>
                            <td>
                                @item.ApprovalStatus.GetDisplayName()
                            </td>
                        </tr>
                    }
                }
                @* if no travel requests exist display message *@
                else
                {
                    <tr>
                        <td class="text-center">
                        <h3>No travel requests available.</h3>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        </div>
</div>

@if (User.IsInRole("VP"))
{
<div class="request-container">
<h2 class="request_header">Test need approval by VP (should only show up for vp)</h2>
<div class="request-table">
    <table>
        <thead>
            <tr>
                <th>Employee</th>
                <th>Location</th>
                <th>Date</th>
                <th>Transportation</th>
                <th>Cost</th>
                <th>Quick Action</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @* display travel requests if they exist *@
            @if (Model.VPApprovalList != null && Model.VPApprovalList.Any())
            {
                @foreach (var item in Model.VPApprovalList)
                {
                    <tr>
                        <td>
                            @item.FirstName @item.LastName
                        </td>
                        <td>
                            @item.Location
                        </td>
                        <td>
                            @item.ConferenceStartDate?.ToShortDateString() - @item.ConferenceEndDate?.ToShortDateString()
                        </td>
                        <td>
                            @item.TransportationMode
                        </td>
                        <td>
                            $@item.CostOfConference
                        </td>
                        <td><button class="btn cancel">Cancel</button></td>
                        <td>
                            @item.ApprovalStatus.GetDisplayName()
                        </td>
                    </tr>
                }
            }
            @* if no travel requests exist display message *@
            else
            {
                <tr>
                    <td class="text-center">
                    <h3>No travel requests to approve.</h3>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    </div>
</div>
}



    <div class="request-container">
        <h2 class="request_header">My Requests</h2>
        <div class="request-table">
            <table>
                <thead>
                    <tr>
                        <th>Location</th>
                        <th>Date</th>
                        <th>Quick Action</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>New York, NY</td>
                        <td>May 10, 2025 - May 15, 2025</td>
                        <td><button class="btn cancel">Cancel</button></td>
                        <td><span class="status booked">Booked</span></td>
                    </tr>
                    <tr>
                        <td>Los Angeles, CA</td>
                        <td>June 1, 2025 - June 7, 2025</td>
                        <td><button class="btn disabled">Cancel</button></td>
                        <td><span class="status denied">Denied</span></td>
                    </tr>
                    <tr>
                        <td>Chicago, IL</td>
                        <td>July 12, 2025 - July 18, 2025</td>
                        <td><button class="btn cancel">Cancel</button></td>
                        <td><span class="status pending">Pending</span></td>
                    </tr>
                </tbody>
            </table>
        </div class="btn container">
        <!--Replace Privacy with create travel request location-->
        <button class="create-request" onclick="window.location.href='Home/Privacy';">
            <i class="bi bi-calendar-week me-2"></i> Create Travel Request
        </button>
    </div>

    <!--CEO/VP Section-->
    <div class="ceo-container">
        <h2 class="request_header">Waiting Approvals</h2>
        <div class="request-table">
            <table>
                <thead>
                    <tr>
                        <th>Location</th>
                        <th>Date</th>
                        <th>Quick Action</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>New York, NY</td>
                        <td>May 10, 2025 - May 15, 2025</td>
                        <td>
                            <div class="action-btn">
                        <button class="btn btn-success"><i class="bi bi-check-square"></i></button>
                        <button class="btn btn-danger"><i class="bi bi-x-lg"></i></button>
                            </div>
                        </td>
                        <td><span class="status pending">Pending</span></td>
                    </tr>
                    <tr>
                        <td>Los Angeles, CA</td>
                        <td>June 1, 2025 - June 7, 2025</td>
                        <td>
                            <div class="action-btn">
                        <button class="btn btn-success"><i class="bi bi-check-square"></i></button>
                        <button class="btn btn-danger"><i class="bi bi-x-lg"></i></button>
                            </div>
                        </td>
                        <td><span class="status pending">Pending</span></td>
                    </tr>
                    <tr>
                        <td>Chicago, IL</td>
                        <td>July 12, 2025 - July 18, 2025</td>
                        <td>
                            <div class="action-btn">
                        <button class="btn btn-success"><i class="bi bi-check-square"></i></button>
                        <button class="btn btn-danger"><i class="bi bi-x-lg"></i></button>
                            </div>
                        </td>
                        <td><span class="status pending">Pending</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
     </div>

     <!--Processor Section-->
     <div class="processor-container">
        <h2 class="request_header">Booking Required</h2>
        <div class="request-table">
            <table>
                <thead>
                    <tr>
                        <th>Employee Name</th>
                        <th>Location</th>
                        <th>Date</th>
                        <th>Transportation</th>
                        <th>Cost</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Jane Cooper</td>
                        <td>New York, NY</td>
                        <td>May 10, 2025 - May 15, 2025</td>
                        <td>Greyhound Bus</td>
                        <td>$50</td>
                    </tr>
                    <tr>
                        <td>Floyd Miles</td>
                        <td>Los Angeles, CA</td>
                        <td>June 1, 2025 - June 7, 2025</td>
                        <td>Plane</td>
                        <td>$750</td>
                    </tr>
                    <tr>
                        <td>Ronald Richards</td>
                        <td>Chicago, IL</td>
                        <td>July 12, 2025 - July 18, 2025</td>
                        <td>Car</td>
                        <td>$3.50</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>